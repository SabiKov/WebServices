/* This is a helper class to handle CURD requestes */

var rootURL = 'ttp://localhost:8080/toy/webapi/toys';
var queryTypeRootURL = '?queryType=';
var argument1RootURL = '&argument1=';
var argument2RootURL = '&argument2=';
var findAllRootURL = 'http://localhost:8080/toy/webapi/toys?queryType=&argument1=&argument2=';

/* Request all toy item */
function findAllItem() {
	console.log('findiAll');	
	$.ajax({
		type: 'GET',
		url: findAllRootURL,
		dataType: 'json',
		success: createListview
	});
}

/* Find item based on one parameter */
function findAllItem(queryType, param1) {
	console.log('two param');
	$.ajax({
		type: 'GET',
		url: rootURL + queryTypeRootURL + queryType + argument1RootURL + param1,
		dataType: 'json',
		success: createListview
	});
	console.log(rootURL+queryTypeRootURL+queryType+argument1RootURL+param1);
}
/* Find item based on two parameters */
function findAllItem(queryType, param1, param2) {
	console.log('two param');
	$.ajax({
		type: 'GET',
		url: rootURL + queryTypeRootURL + queryType + argument1RootURL + param1 + argument2RootURL + param2,
		dataType: 'json',
		success: createListview
	});
	console.log(rootURL+queryTypeRootURL+queryType+argument1RootURL+param1);
}
/* Generates a jqm listview model */
function createListview(data) {
	//console.log(data[0].id + data[0].name + data[0]. category + data[0].brand + data[0].price + data[0].quantity);
	var list = data == null ? [] : (data instanceof Array ? data : [data]);

	$('#firstPageDisplayBox').empty();
	//alert('Hey');
	$.each(list, function(index, toy) {
		$('#firstPageDisplayBox').append('<form id="form_' + toy.id + '">\
											<div data-role="collapsible" data-mini="true">\
												<legend>'+ toy.name +'<span class="ui-li-count">qty:'+ toy.quantity + '</span></legend>\
												<ul data-role="listview" data-inset="true">\
													<li class="ui-field-contain ui-grid-b">\
														<div class="ui-block-a">\
															<label for="' + toy.id + '">ID:</label>\
															<input disabled="disabled" name="' + toy.id +'" id="" value="'+ toy.id +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-b">\
															<label for="' + toy.name + '">Name:</label>\
															<input name="' + toy.name +'" id="'+ toy.name +'" value="'+ toy.name +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-c">\
															<label for="' + toy.brand + '">Brand:</label>\
															<input name="' + toy.brand +'" id="'+ toy.brand +'" value="'+ toy.brand +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-a">\
															<label for="' + toy.category + '">Category:</label>\
															<input name="' + toy.category +'" id="'+ toy.cateogry +'" value="'+ toy.category +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-b">\
															<label for="' + toy.price + '">Price:</label>\
															<input name="' + toy.price +'" id="'+ toy.price +'" value="'+ toy.price +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-c">\
															<label for="' + toy.quantity + '">Quantity:</label>\
															<input name="' + toy.quantity +'" id="'+ toy.quantity +'" value="'+ toy.quantity +'" type="text" data-mini="true">\
														</div>\
														<div class="ui-block-a">\
														</div>\
														<div class="ui-block-b">\
															<a href="#" class="ui-btn ui-mini ui-icon-edit ui-btn-icon-left ui-corner-all editBtn" id="editBtn_'+ toy.id +'">Edit</a>\
														</div>\
														<div class="ui-block-c">\
															<a href="#" class="ui-btn ui-icon-delete ui-btn-icon-left ui-corner-all deleteBtn id="deleteBtn_'+ toy.id +'">Delete</a>\
														</div>\
													</li>\
												</ul>\
											</div>\
										</form>');	
		//$('#firstPageDisplayBox').trigger('create');
		$('#firstPageDisplayBox').trigger( 'create' );
	});
	//$('#firstPageDisplayBox').trigger('create');
//	$('#firstPageDisplayBox').appendTo( ".ui-page" ).trigger( "create" );
}

/* Delete Item */
/*
function deleteItem(arg1) {
	console.log('delet item');
	$.ajax({
		type: 'DELETE',
		url: 
	});
}
*/